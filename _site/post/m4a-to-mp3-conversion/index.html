<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="Cache-control" content="public">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

    <!-- site info -->
    <meta name="author" content="Jeremy Warner">
    <meta name="robots" content="index, follow">
    <meta name="keywords" content="jeremy warner, berkeley, human computer interaction, online education, computer science, hci">
    <meta name="description" content="I am an EECS Ph.D. student at UC Berkeley, and am advised by Björn Hartmann. My research focuses on systems-building human computer interaction work - check out some of my projects. Before this, I attended the University of Rochester, where I worked with Philip Guo.
">
    <title>
      
        jeremy warner - m4a to mp3 conversion
      
    </title>

    <!-- CSS -->
    <link rel="stylesheet" href="/src/css/main.css">
    <link rel="stylesheet" href="/src/css/syntax.css">
    <link rel="alternate" type="application/rss+xml" title="Bakery Store RSS" href="/feed.xml">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

    <!-- JS -->
    <script type="text/javascript" src="/src/js/ga.js" async></script>

    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/src/img/logo.png">
    <link rel="shortcut icon" href="/src/img/favicon.ico">

    <!-- Facebook -->
    <meta property="og:site_name"   content="Jeremy Warner"/>
    <meta property="og:description" content=" I am an EECS Ph.D. student at UC Berkeley, and am advised by Björn Hartmann. My research focuses on systems-building human computer interaction work - check out some of my projects. Before this, I attended the University of Rochester, where I worked with Philip Guo.
 " />
    <meta property="og:title"       content="Jeremy Warner  - m4a to mp3 conversion "/>
    <meta property="og:image"       content="  " />
  </head>
  <body>

    <div class="wrap">
      <!-- responsive masthead -->
      <div class="masthead">
        <div class="container">
          <div class="nav">
            <a href="/" title="home">home</a>
            <a href="/blog" title="blog">blog</a>
            <a href="https://twitter.com/jeremywrnr" target="_blank" title="twitter">twitter</a>
          </div>
        </div>
      </div>

      <div class="container">
        <div class="post-header">
    <h1 class="post-title" >M4a To Mp3 Conversion</h1>
    <span class="post-meta">written apr 19, 2016</span>
    </br> <span class="post-meta"> by <a href="/">jeremy b. warner</a></span>
</div>

<p>Sometimes I record audio with my iphone. The format that it saves the recording
in is m4a, which is a wrapper for AAC/MP4, and there is no way to easily change
what format the audio recorder uses. While this format features more advanced
compression, it still can yield some compatibility issues for windows users. No
one likes explaining how to install VLC player to Grandpa for the third time -
transcoding from m4a to mp3 before sharing makes things easier. On OSX, it is
not too hard to convert a bunch of audio files (though it may take some time
while transcoding larger files). First, we need ffmpeg to convert files at the
command line. Install it with brew:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>brew install ffmpeg
</code></pre>
</div>

<p>Then, we can convert a single file like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ffmpeg -i "filename.m4a" -acodec libmp3lame -ab 320k "filename.mp3"
</code></pre>
</div>

<p>This is still inefficient, since we would have to specify each file that we
want to change. We can use streams and filename placeholders as generalizations
to handle this issue:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>find . -type f -name "*m4a" |\
    sed -e "s/.m4a$//" |\
    xargs -I % ffmpeg -i "%.m4a" -acodec libmp3lame -ab 320k "%.mp3"
</code></pre>
</div>

<p>Here, <code class="highlighter-rouge">find</code> is locating all files that end in m4a in and below the current
directory. It passes them through <code class="highlighter-rouge">sed</code> to strip off the file extension. Then
each base name is passed into xargs to run the converter command on each
matched base name, going where ‘filename’ was in the example command above. To
add this converter as an alias in your shell’s config file for ease of use:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>alias m4a2mp3='find . -name "*m4a" -type f | sed -e "s/.m4a$//" | xargs -I % ffmpeg -i "%.m4a" -acodec libmp3lame -ab 320k "%.mp3"'
</code></pre>
</div>

<p>Note that these commands were written to work with OSX (a BSD-based OS), so
some command line utilities (particularly xargs) may have different syntax with
other operating systems.</p>



<!--sort and link the separate posts chronologically-->





<script>
document.body.onkeyup = function(e) {
  if (e.keyCode == '37') { window.location = '/post/using-the-oakland-chip/'; }
  if (e.keyCode == '39') { window.location = '/post/rubys-any-and-all-in-js/'; }
};
</script>

<span class="post-meta">
    <a href="mailto:jeremy.warner@berkeley.edu">email</a> /
    <a href="https://twitter.com/jeremywrnr">tweet</a>
</span>

<div class="masthead">
   <a href="/post/using-the-oakland-chip/" class="prev">prev</a> 
  <a href="/blog">all</a>
   <a href="/post/rubys-any-and-all-in-js/" class="nxt">next</a>
</div>


      </div>
    </div>

  </body>
</html>
